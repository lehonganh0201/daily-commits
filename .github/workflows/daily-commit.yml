name: Daily Random Commits

on:
  schedule:
    - cron: '0 12 * * *' 
  workflow_dispatch: 
jobs:
  random-commits:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repo
      uses: actions/checkout@v4
      with:
        fetch-depth: 0
        token: ${{ secrets.MY_PAT }} 

    - name: Cấu hình Git identity
      run: |
        git config --global user.name "lehonganh0201"
        git config --global user.email "le2960620@gmail.com"

    - name: Random số lần commit và commit
      run: |
        NUM_COMMITS=$((RANDOM % 6 + 5))
        echo "Hôm nay sẽ commit $NUM_COMMITS lần!"
        
        for ((i=1; i<=NUM_COMMITS; i++)); do
          CURRENT_TIME=$(date '+%Y-%m-%d %H:%M:%S')
          CONTENT="$CURRENT_TIME và $NUM_COMMITS lần commit, lần commit thứ $i"
          echo "$CONTENT" >> activity.log
          git add activity.log
          git commit -m "$CONTENT"
        done

    - name: Push changes
      run: |
        git push https://${{ secrets.MY_PAT }}@github.com/lehonganh0201/daily-commits.git HEAD:main
